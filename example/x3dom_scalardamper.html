<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
	<title>ScalarDamper Example</title>
    <!-- BEGIN:X3DOM -->
    <meta http-equiv="X-UA-Compatible" content="chrome=1,IE=edge" />
    <link rel="stylesheet" type="text/css" href="x3dom.css" />
		<script type='text/javascript' src='x3dom.js'></script>
</head> 
<body>
  <div style="width:640px;">
    <p>ScalarDamper used to fade in and out a box</p>
    <X3D showStat='false' showLog='false' width='640px' height='480px'>
      <Scene DEF='scene'>
        <Background skyColor='0.100 0.200 0.200'></Background>
        <Transform>
          <Shape>
            <Appearance>
              <Material id="material" diffuseColor="0.7 0.4 0.3" transparency="0.0"></Material>
            </Appearance>
            <Box></Box>
          </Shape>
        </Transform>
        <ScalarDamper id="sc" DEF="sdamper" tau="0.5" order="1" initialDestination="0" initialValue="0"></ScalarDamper>
        <ROUTE fromNode='sdamper' fromField='value_changed' toNode='material' toField='transparency'></ROUTE>
      </Scene>
    </X3D>
    <input style="float:left; display:block;" id="button" type="button" value="FadeOut" onclick="fadeBox();">
  </div>
  <script>
    var visible = true;
    function fadeBox() 
    {
      if (visible) { 
        document.getElementById('sc').setAttribute('set_destination', '1');
        document.getElementById('button').value = "Fade In";
        visible = false;
      } else {
        document.getElementById('sc').setAttribute('set_destination', '0');
        document.getElementById('button').value = "Fade Out";
        visible = true;
      }
    }
  </script>
</body>
</html>