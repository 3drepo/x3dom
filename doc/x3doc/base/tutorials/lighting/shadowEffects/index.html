<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>X3DOM Documentation: Tutorials</title>    
    <link type="text/css" rel="stylesheet" href="../../../static/styles/x3dom-docs.css">
    <script src="../../../static/scripts/prettify/run_prettify.js"></script>
</head>

<body>

<div id="mainContainerDiv">

<div id="header-decoration">
    official x3<strong>dom</strong> documentation
</div>
<div id="header-navbar">
    <a href="http://x3dom.org">x3dom.org</a>
    >
    <a href="../../../index.html">documentation</a>    
    >
    <a href="../../index.html">Tutorials</a>
	>
    <a href="#">Advanced Shadows</a>
</div>
<div id="main">

    <section>	
        
        <div>
            <div class="simpleButton" style="float:left;"><a href="../basicShadows/index.html" style="float:right;">&#8678; Previous Section</a></div>
            <div class="simpleButton" style="float:right;"><a href="../gamma/index.html" style="float:right;">Next Section &#8680;</a></div>
            <div style="clear:both;"></div>
        </div>
        <div style="text-align:center;">
            <h1>Advanced Shadows</h1>
        </div>            
        <br>
		
       
	   <p> With the right combination of <span style="background-color:lightgrey">shadowMapSize</span>, <span style="background-color:lightgrey">shadowFilterSize</span> and <span style="background-color:lightgrey">shadowCascades</span>
	   a satisfyable shadow quality should be achievable in most cases. However, there are situations in which further adjustments might be needed, which is why an additional set of shadow options was introduced into X3DOM. 
	   </p>
	   <p>
	   The first one – shadowOffset – is used to hide artifacts which may occur in specific scenarios. One of these situations that is escpecially susceptible to inaccuracies is a scene in which the light direction is nearly parallel to an object’s surface. 
	   By increasing the shadowOffset the shadow artifacts become less pronounced. However, not only artifacts are affected by this setting, but to some degree the correctly drawn shadows are, too. 
	   A high shadow offset can result in light to leak onto objects which should be in shadow. For this reason the default offset value is zero.<br>
		Further options to influence shadow computations are given by the light node’s zNear and zFar properties. These settings determine the placement of the near and far planes of the light projection, i.e. the bounds of the 
		area in which shadow casters are captured. If no such setting is given, the near and far planes are placed automatically.
		</p>
		
		<p> An example scenario where a manual setting of one of these planes might be helpful would be a scene 
		where an object is placed very closely to the light source. If you don’t want that object to cast a shadow, the zNear setting can be set to a value which places the near plane behind that object and thereby excludes it 
		from the shadow computations. (Please note: if the shadows disappear when a shadow caster leaves the visible view area, then try setting the Environment bindable node’s frustumCulling field to false.)
		The last two settings – shadowSplitFactor and shadowSplitOffset – are additional parameters for cascading. As mentioned before, when using shadow cascades the visible area is split along the z-axis. The shadowSplitFactor 
		setting determines, how these splits are placed. A setting of zero gives an equidistant placement, a setting of one a logarithmic placement. In most cases a logarithmic placement should achieve better results, since it 
		allocates more resolution to the close range where it is needed the most. However, the equidistant split scheme can still be useful in some scenarios, as the transitions between different cascades are less apparent. 
		The shadowSplitOffset option was introduced, because in some cases the cascades close to the near plane can get quite small. While this is good for shadow quality in that specific cascade, the transition to the next 
		cascade will become all the more apparent. By using the shadowSplitOffset property, the split positions are moved away from the camera while the computation scheme that is defined by shadowSplitFactor is still respected.</p>

        <p> 
		Finally, shadows are affected by gamma correction, as shadowIntensity is considered a linear intensity whose effect is dependent on whether you compensate for gamma. When working gamma-corrected / linear, the setting controls the amount by which a pixel in the umbra is darkened, e.g. 0.7 means 70 % darkness, so 30% of the pixel’s intensity remains. Accordingly, 0.82 or 82% results in an umbra which is visually half as bright as the environment. 
		See the <a href="../gamma/index.html">gamma and lighting tutorial</a> for more information.
		</p>
		<p>		
        <a href="#">Back to page top &#10548;</a>
        </p>    
        
        <div class="contentBox">                        
            <h2>Get this X3DOM example:</h2>
            <ul>
                <li><a href="example.html"><img src="../../liveDemo.png">Display example HTML file</a></li>                
                <li><a href="javascript:window.location='view-source:' + window.location.href.replace('index.html', 'example.html');"><img src="../../source.png">View example page source</a></li>                
                <li><a href="lights.zip"><img src="../../download.png">Download full example (.zip archive)</a></li>
            </ul>      
            <br>
            
            <h2>Read more about the X3DOM nodes used in this tutorial:</h2>
            <ul>
                <li><a href="../../../node/foo.html">FOO</a></li>
                <li><a href="../../../node/bar.html">BAR</a></li>
            </ul>
        </div>

    </section>

</div>

</div>

</body>
</html>
